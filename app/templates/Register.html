<!DOCTYPE html>
<html lang="en">
<head>
  </div>

  <!-- Include JavaScript libraries -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!-- Register page script -->
  <script>
    $(document).ready(function() {
        // Load navigation component
        $("#nav-placeholder").load("./components/navigation.html", function() {
            // After loading the navigation, check if we're on the register page
            if (window.location.pathname.includes('register')) {
                // Highlight the register navigation item
                $('#register-nav-item a').addClass('active');
            }
        });

        // Handle registration form submission
        $("#register-form").on('submit', function(e) {
            e.preventDefault();

            // Get form data
            const formData = {
                username: $("#username").val(),
                firstname: $("#firstname").val(),
                lastname: $("#lastname").val(),
                email: $("#email").val(),
                password: $("#password").val(),
                dob: $("#dob").val()
            };

            // Call register API
            $.ajax({
                url: '/api/auth/register',
                type: 'POST',
                contentType: 'application/json',
                data: JSON.stringify(formData),
                success: function(response) {
                    // If registration successful
                    if (response.status === 'success') {
                        alert('Registration successful! Please check your email to verify your account.');
                        // Redirect to login page
                        window.location.href = '/login';
                    } else {
                        // Show error message
                        alert('Registration failed: ' + (response.error?.message || 'Unknown error'));
                    }
                },
                error: function(xhr) {
                    // Parse error response
                    try {
                        const response = JSON.parse(xhr.responseText);

                        // Check for validation errors
                        if (response.error?.code === 'validation_error' && response.error?.details) {
                            // Display specific validation errors
                            let errorMessage = 'Please correct the following errors:\n';
                            for (const field in response.error.details) {
                                errorMessage += `- ${response.error.details[field]}\n`;
                            }
                            alert(errorMessage);
                        } else {
                            alert('Registration failed: ' + (response.error?.message || 'Server error'));
                        }
                    } catch (e) {
                        alert('Registration failed. Please try again later.');
                    }
                }
            });
        });
    });
  </script>
  </body>
</html><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Register - Dive.site</title>
<!-- Include Bootstrap CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
<!-- Include Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
<!-- Include custom CSS -->
<link rel="stylesheet" href="./css/styles.css">
<!-- Registration page specific styles -->
<style>
  .register-container {
      max-width: 600px;
      margin: 60px auto;
      padding: 30px;
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
  }

  .register-title {
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 20px;
      color: var(--primary-color);
      position: relative;
  }

  .register-title::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: -10px;
      width: 50px;
      height: 3px;
      background-color: var(--accent-color);
      border-radius: 3px;
  }

  .register-form .form-control {
      height: 48px;
      margin-bottom: 20px;
      border: 1px solid #ddd;
      border-radius: 4px;
      padding-left: 12px;
  }

  .register-form .form-control:focus {
      box-shadow: 0 0 0 0.2rem rgba(52, 152, 219, 0.25);
      border-color: var(--accent-color);
  }

  .register-btn {
      background-color: #ff6600;
      border: none;
      height: 48px;
      border-radius: 4px;
      font-weight: 500;
      width: 100%;
      margin-top: 10px;
  }

  .register-btn:hover {
      background-color: #e65c00;
  }

  .login-link {
      margin-top: 20px;
      text-align: center;
      color: var(--light-text);
  }

  .login-link a {
      color: var(--accent-color);
      text-decoration: none;
  }

  .login-link a:hover {
      text-decoration: underline;
  }

  .form-label {
      font-weight: 500;
      color: var(--primary-color);
  }

  .form-text {
      color: var(--light-text);
  }
</style>
</head>
<body>
<!-- Include navigation component -->
<div id="nav-placeholder"></div>

<!-- Main content -->
<div class="container">
  <div class="register-container">
    <h2 class="register-title">Create Your Account</h2>

    <!-- Registration form -->
    <form id="register-form" class="register-form">
      <div class="row">
        <!-- First Name input -->
        <div class="col-md-6 mb-3">
          <label for="firstname" class="form-label">First Name</label>
          <input type="text" class="form-control" id="firstname" name="firstname" required>
        </div>

        <!-- Last Name input -->
        <div class="col-md-6 mb-3">
          <label for="lastname" class="form-label">Last Name</label>
          <input type="text" class="form-control" id="lastname" name="lastname" required>
        </div>
      </div>

      <!-- Username input -->
      <div class="mb-3">
        <label for="username" class="form-label">Username</label>
        <input type="text" class="form-control" id="username" name="username" required>
        <div class="form-text">Choose a unique username for your profile</div>
      </div>

      <!-- Email input -->
      <div class="mb-3">
        <label for="email" class="form-label">Email Address</label>
        <input type="email" class="form-control" id="email" name="email" required>
        <div class="form-text">We'll send a verification link to this email</div>
      </div>

      <!-- Password input -->
      <div class="mb-3">
        <label for="password" class="form-label">Password</label>
        <input type="password" class="form-control" id="password" name="password" required>
        <div class="form-text">Use 8+ characters with a mix of letters, numbers & symbols</div>
      </div>

      <!-- Date of Birth input -->
      <div class="mb-3">
        <label for="dob" class="form-label">Date of Birth</label>
        <input type="date" class="form-control" id="dob" name="dob" required>
      </div>

      <!-- Terms agreement checkbox -->
      <div class="mb-3 form-check">
        <input type="checkbox" class="form-check-input" id="terms-agreement" required>
        <label class="form-check-label" for="terms-agreement">
          I agree to the <a href="/terms" target="_blank">Terms of Service</a> and <a href="/privacy" target="_blank">Privacy Policy</a>
        </label>
      </div>

      <!-- Register button -->
      <button type="submit" class="btn btn-primary register-btn">CREATE ACCOUNT</button>

      <!-- Login link -->
      <div class="login-link">
        Already have an account? <a href="/login">Log in</a>
      </div>
    </form>
  </div>